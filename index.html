<!-- python3 -m http.server 3000-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bedside Dashboard</title>

  <!-- iOS fullscreen web app -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="style.css?v=37">
</head>

<body>
  <div class="app-shell">
    <div class="main-content">
    <!-- HEADER: date above big time + progress ring -->
    <div class="header">
      <div class="header-left">
        <div id="date" class="date serif"></div>
        <div id="time" class="time serif"></div>
      </div>

      <div class="header-right">
        <div class="progress-wrapper">
          <svg viewBox="0 0 80 80" class="ring">
            <circle class="ring-bg" cx="40" cy="40" r="32"></circle>
            <circle class="ring-progress" cx="40" cy="40" r="32"></circle>
            <text x="40" y="43" class="ring-text">0/0</text>
          </svg>
          <div class="progress-check">✓</div>
        </div>
      </div>
    </div>

    <!-- THREE COLUMN LAYOUT -->
    <div class="columns">

    <!-- COLUMN 1: Weather + Notes -->
    <div class="column">
      <!-- Weather -->
      <div class="section">
        <div class="section-title serif">Today’s Weather</div>

        <div class="weather-main">
          <div class="weather-icon"></div>

          <div class="weather-temp-block">
            <div class="editable weather-temp serif" data-save="weatherTemp" contenteditable="true">
65°F
            </div>
            <div class="weather-range">
              <span class="editable weather-low" data-save="weatherLow" contenteditable="true">Low 34°F</span>
              <span class="range-sep">•</span>
              <span class="editable weather-high" data-save="weatherHigh" contenteditable="true">High 89°F</span>
            </div>
          </div>

          <div class="editable weather-detail" data-save="weatherRange" contenteditable="true">
Clear with evening breeze · add a light coat
          </div>
          <div id="weatherRecommendation" class="weather-reco small-note">
            Light layers work well today.
          </div>
        </div>
      </div>

        <div class="hline"></div>

        <!-- Notes -->
        <div class="section">
          <div class="section-title serif">Tomorrow</div>
          <div class="section-subtitle">
            Add tasks that should show up in tomorrow’s To-Do.
          </div>

          <div class="checklist" data-save="tomorrowTasks">
            <!-- starts empty; you add items with the button below -->
          </div>

          <button class="add-btn" data-target="tomorrowTasks">+ Add for tomorrow</button>
        </div>
        <div class="hline"></div>
        <div class="section">
          <div class="section-title serif">Notes</div>
          <div
            class="editable"
            style="min-height: 80px;"
            data-save="notes"
            contenteditable="true"
          >
Anything you want to remember for later tonight or tomorrow.
          </div>
        </div>
      </div>

      <!-- COLUMN 2: Monthly Focus + Daily To Do -->
      <div class="column">
        <!-- Daily Habits -->
        <div class="section">
          <div class="section-title serif">Daily Habits</div>

          <div class="checklist" data-save="dailyHabits">
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">Nightly Istikhara</span>
            </div>
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">Workout</span>
            </div>
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">Quran</span>
            </div>
          </div>

          <button class="add-btn" data-target="dailyHabits">+ Add habit</button>
        </div>

        <div class="hline"></div>

        <!-- Daily To Do -->
        <div class="section">
          <div class="section-title serif">Daily To-Do</div>

          <div class="checklist" data-save="dailyTasks">
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">9am–2pm shift @ MOTW</span>
            </div>
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">Return CVS items</span>
            </div>
            <div class="check-item">
              <input type="checkbox" />
              <span class="label" contenteditable="true">Call Wellstar</span>
            </div>
          </div>

          <button class="add-btn" data-target="dailyTasks">+ Add task</button>
        </div>

        <div class="hline"></div>
        <!-- Consistency Monitor -->
        <div class="section">
          <div class="section-title serif">Consistency Monitor</div>
          <div class="section-subtitle">
            Tasks + habits completion over time.
          </div>
          <div id="consistencyChartWrapper">
            <div id="consistencyChart"></div>
            <div id="consistencyEmpty" class="small-note">
              Once you start checking things off, your history will appear here.
            </div>
          </div>
        </div>

      </div>

      <!-- COLUMN 3: Habits + Prayer + Consistency -->
      <div class="column">

        <!-- Google Calendar -->
        <div class="section">
          <div class="section-header">
            <div>
              <div class="section-title serif">Google Calendar</div>
            </div>
            <div class="calendar-actions compact">
              <button id="calendarAuthButton" class="pill-btn">Connect</button>
              <button id="calendarSignOut" class="pill-btn ghost" style="display: none;">Sign out</button>
            </div>
          </div>
          <div id="calendarStatus" class="small-note" style="display: none;"></div>
          <div id="calendarEvents" class="calendar-list checklist"></div>
          <div id="syncStatus" class="small-note" style="display: none;"></div>
        </div>

        <div class="hline"></div>

        <!-- Monthly Focus -->
        <div class="section">
          <div class="section-title serif">Monthly Focus</div>
          <div
            class="editable stealth-edit"
            style="min-height: 70px;"
            data-save="monthlyFocus"
            contenteditable="true"
          >
• Apply to jobs
• Plants
• Sewing
          </div>
        </div>

        <div class="hline"></div>

        <!-- Prayer Times -->
        <div class="section">
          <div class="section-title serif">Prayer Times</div>
          <div class="section-subtitle" id="prayerLocationLabel">
            Today
          </div>
          <div id="prayerTimes" class="prayer-list small-note">
            Loading prayer times…
          </div>
        </div>
      </div>
    </div>
    </div> <!-- end main-content -->

    <div class="footer">
      Daily To-Do resets at midnight · Habits, notes & focus stay until you change them · Ring + chart = tasks + habits ✨
    </div>
  </div>

  <script src="config.js"></script>
  <script src="script.js"></script>
  <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
  <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
</body>
</html>
